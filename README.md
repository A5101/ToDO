# Masked input in Blazor
## Blazor и JS
Хотя Blazor с помощью  WebAssembly может положить конец нашей зависимости от JavaScript, JavaScript не исчезнет в ближайшее время. Есть еще много вещей, которые WebAssembly просто не может сделать, в первую очередь это манипулирование DOM. Как же нам справляться с этой проблемой?

Ответ — взаимодействие с JavaScript. Когда мы не можем сделать то, что нам нужно, используя только код .NET, мы можем использовать абстракцию IJSRuntime для вызова функций JavaScript. Мы даже можем заставить функции JavaScript выполнять вызовы в наш код C#.

В качестве задачи стояла необходимость добавления масочного поля ввода с использованием JavaScript. В качестве готовой реализации масочноговвода будет испоользоваться библиотека IMask. Библиотека IMask представляет собой JavaScript-библиотеку, которая облегчает создание и применение масок в полях ввода. Маска в данном контексте представляет собой определенный формат, который ограничивает пользовательский ввод и приводит его к заданной структуре. Это может быть полезно для ограничения ввода телефонных номеров, дат, времени, почтовых индексов и других данных в конкретном формате.
## Принципы подключения и вызова
Для начала следует разобраться с принципами подключения и вызова JS кода в компоненте Blazor.

Для начала необходимо подключить необходимую бибилиотеку.
```html
<script src="https://unpkg.com/imask"></script>
```
Вся дальнейшая работа будет уже в компонентах Blazor.

С помощью этой простой конструкции мы создаем и вставляем в наш компонент объект jsRuntime, который позволит нам вызывать JS код.
```csharp
@inject IJSRuntime jsRuntime
```

Чтобы понять конкретнее как это использовать, стоит рассмотреть следующий кусок кода.
```html
<input required type="text" id="maskedInput" class="form-control"/>
```
```csharp
protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await jsRuntime.InvokeVoidAsync("applyMask", "maskedInput", "+{7}(000)000-00-00");
        }
    }
```
По сути, мы добавили на страничку input с собственным id=maskedInput. С помощью метода InvokeVoidAsync объекта jsRuntime мы обращаемся к js методу под названием "applyMask" и передаем ему в качестве входных параметров id интересующего нас input'a и маску, которую мы хотим к нему применить.

Вся основная логика будет применяться уже в js скрипте. Получаем из DOM элемент с нужным нам id и применяем к нему маску с помощью библиотеки IMask.
```javascript
function applyMask(elementId, mask) {
        const element = document.getElementById(elementId);
        const maskOptions = {
            mask: mask
        };
        const maskInstance = IMask(element, maskOptions);

        return maskInstance;
    }
```
